<template>
  <import from="./scene-viewer"></import>

  <section>
    <div class="container-fluid">
      <div class="row">

        <div if.bind="sceneConfig" class="col-xs-8">

          <div class="well text-center">
            <scene-viewer
              src.bind="sceneConfig"
              model.two-way="M">
            </scene-viewer>
          </div>

          <form class="well" submit.delegate="submitBackground( $event )">
            <fieldset if.bind="M.game.scene">

              <legend data-toggle="collapse" data-target="#bg-panel">
                Backgrounds
                <span class="caret"></span>
              </legend>

              <div id="bg-panel" class="collapse">
                <div class="row" repeat.for="bg of M.game.scene.backgrounds">
                  <div class="col-xs-2 form-group">
                    <label for="bg-${$index}-field-id">ID</label>
                    <input type="text" id="bg-${$index}-field-id" value.bind="bg.id" class="form-control">
                  </div>
                  <div class="col-xs-2 form-group">
                    <label for="bg-${$index}-field-tint">Tint</label>
                    <input type="text" id="bg-${$index}-field-tint" value.bind="bg.tint" class="form-control">
                  </div>
                  <div class="col-xs-2 form-group">
                    <label for="bg-${$index}-field-parallax">Parallax</label>
                    <input type="text" id="bg-${$index}-field-parallax" value.bind="bg.parallax" class="form-control">
                  </div>
                  <div class="col-xs-6 form-group">
                    <label for="bg-${$index}-field-image-url">Image URL</label>
                    <input type="text" id="bg-${$index}-field-imageUrl" value="${bg.imageUrl}" class="form-control">
                  </div>
                </div>
                <div class="text-right">
                  <button type="submit" class="btn btn-primary">Save</button>
                </div>

              </div>

            </fieldset>
          </form>

        </div>

        <div class="col-xs-4">

          <!-- sprite list -->
          <div class="well" if.bind="!M.sprite&&M.game.scene">
            <strong>Sprites</strong>
            <ul class="list-unstyled">
              <li repeat.for="sprite of M.game.scene.sprites">
                <a click.delegate="$parent.selectSprite( sprite )">
                  ${sprite.id}
                </a>
              </li>
            </ul>
          <div>

          <!-- sprite details -->
          <form class="well" if.bind="M.sprite.id" submit.delegate="submitSprite( $event )">
            <fieldset>

              <div class="row">
                <div class="col-xs-8">
                  <legend>
                    ${M.sprite.id | capitalize}
                  </legend>
                </div>
                <div class="col-xs-4">
                  <a href="#/script/0/${M.sprite.id}" class="btn btn-block btn-default pull-right">Script</a>
                </div>
              </div>

              <div class="row">
                <div class="col-xs-6 form-group">
                  <label>ID</label>
                  <input type="text" id="item-field-id" value.bind="M.sprite.id" class="form-control">
                </div>
                <div class="col-xs-6 form-group">
                  <label>Interactive</label>
                  <div class="form-control">
                    <label><input type="radio" id="item-field-interactive-true" name="item-field-interactive" value="true">&nbsp;&nbsp;True</label>
                    &nbsp;&nbsp;&nbsp;&nbsp;
                    <label><input type="radio" id="item-field-interactive-false" name="item-field-interactive" value="false">&nbsp;&nbsp;False</label>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-xs-3 form-group">
                  <label>X</label>
                  <input type="number" step.bind="10" id="item-field-x" value.bind="M.sprite.x" class="form-control">
                </div>
                <div class="col-xs-3 form-group">
                  <label>Y</label>
                  <input type="number" step.bind="10" id="item-field-y" value.bind="M.sprite.y" class="form-control">
                </div>
                <div class="col-xs-3 form-group">
                  <label>Z</label>
                  <input type="number" step.bind="10" id="item-field-z" value.bind="M.sprite.z" class="form-control">
                </div>
                <div class="col-xs-3 form-group">
                  <label>Direction</label>
                  <input type="number" step.bind="1" min="-1" max="1" id="item-field-dir" value.bind="M.sprite.dir" class="form-control">
                </div>
              </div>

              <div class="row">
                <div class="col-xs-6 form-group">
                  <label>Width</label>
                  <input type="number" step.bind="10" id="item-field-width" value.bind="M.sprite.width" class="form-control">
                </div>
                <div class="col-xs-6 form-group">
                  <label>Height</label>
                  <input type="number" step.bind="10" id="item-field-height" value.bind="M.sprite.height" class="form-control">
                </div>
              </div>

              <div class="row">
                <div class="col-xs-6 form-group">
                  <label>Scale X</label>
                  <input type="number" step.bind="0.1" id="item-field-scale-x" value.bind="M.sprite.scaleX" class="form-control">
                </div>
                <div class="col-xs-6 form-group">
                  <label>Scale Y</label>
                  <input type="number" step.bind="0.1" id="item-field-scale-y" value.bind="M.sprite.scaleY" class="form-control">
                </div>
              </div>

              <div class="row">
                <div class="col-xs-6 form-group">
                  <label>Anchor X</label>
                  <input type="number" step.bind="0.1" id="item-field-anchor-x" value.bind="M.sprite.anchorX" class="form-control">
                </div>
                <div class="col-xs-6 form-group">
                  <label>Anchor Y</label>
                  <input type="number" step.bind="0.1" id="item-field-anchor-y" value.bind="M.sprite.anchorY" class="form-control">
                </div>
              </div>

              <div class="row">
                <div class="col-xs-6 form-group">
                  <label>Tint</label>
                  <input type="text" id="item-field-tint" value.bind="M.sprite.tint" class="form-control">
                </div>
                <div class="col-xs-6 form-group">
                  <label>Speech Color</label>
                  <input type="text" id="item-field-speechColor" value.bind="M.sprite.speechColor" class="form-control">
                </div>
              </div>

              <div class="row">
                <div class="col-xs-12 form-group">
                  <label>Image URL</label>
                  <input type="text" id="item-field-imageUrl" value="${M.sprite.imageUrl}" class="form-control">
                </div>
              </div>

              <div class="text-right">
                <button type="button" class="btn btn-default" click.delegate="cancelSprite( $event )">Cancel</button>
                <button type="submit" class="btn btn-primary">Save</button>
              </div>

            </fieldset>
          </form>
        </div>

      </div>
    </div>
  </section>
</template>
